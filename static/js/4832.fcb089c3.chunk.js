"use strict";(self.webpackChunkmy_assignment=self.webpackChunkmy_assignment||[]).push([[4832],{14832:(e,a,r)=>{r.r(a),r.d(a,{fromUrl:()=>d});var t=r(80808),n=r(9968),l=r(37084),i=r(9200),s=r(69400),o=r(63272),u=r(52416),c=r(37432);const y={FeatureLayer:!0,SceneLayer:!0};async function d(e){var a;const u=null===(a=e.properties)||void 0===a?void 0:a.customParameters,d=await async function(e,a){let r=(0,l.K0)(e);if(null==r&&(r=await async function(e,a){var r,t;const i=await(0,c.S)(e,{customParameters:a});let s=null,o=null;const u=i.type;if("Feature Layer"===u||"Table"===u?(s="FeatureServer",o=null!==(r=i.id)&&void 0!==r?r:null):"indexedVector"===u?s="VectorTileServer":i.hasOwnProperty("mapName")?s="MapServer":i.hasOwnProperty("bandCount")&&i.hasOwnProperty("pixelSizeX")?s="ImageServer":i.hasOwnProperty("maxRecordCount")&&i.hasOwnProperty("allowGeometryUpdates")?s="FeatureServer":i.hasOwnProperty("streamUrls")?s="StreamServer":f(i)?(s="SceneServer",o=i.id):i.hasOwnProperty("layers")&&f(null===(t=i.layers)||void 0===t?void 0:t[0])&&(s="SceneServer"),!s)return null;const y=null!=o?(0,l.Ej)(e):null;return{title:null!=y&&i.name||(0,n.u8)(e),serverType:s,sublayer:o,url:{path:null!=y?y.serviceUrl:(0,n.as)(e).path}}}(e,a)),null==r)throw new t.c("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:e});const{serverType:u,sublayer:d}=r;let v;const h={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"},m="FeatureServer"===u,p="SceneServer"===u,b={parsedUrl:r,Constructor:null,layerId:(m||p)&&null!==d&&void 0!==d?d:void 0,layers:[],tables:[]};switch(u){case"MapServer":v=null!=d?"FeatureLayer":await async function(e,a){return(await(0,c.S)(e,{customParameters:a})).tileInfo}(e,a)?"TileLayer":"MapImageLayer";break;case"ImageServer":{var S;const r=await(0,c.S)(e,{customParameters:a}),{tileInfo:t,cacheType:n}=r;v=t?"LERC"!==(null===t||void 0===t||null===(S=t.format)||void 0===S?void 0:S.toUpperCase())||n&&"elevation"!==n.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer";break}case"SceneServer":{const e=await(0,c.S)(r.url.path,{customParameters:a});if(v="SceneLayer",e){const a=null===e||void 0===e?void 0:e.layers;if("Voxel"===(null===e||void 0===e?void 0:e.layerType))v="VoxelLayer";else if(null!==a&&void 0!==a&&a.length){var L;const e=null===(L=a[0])||void 0===L?void 0:L.layerType;null!=e&&null!=o.Wr[e]&&(v=o.Wr[e])}}break}case"FeatureServer":if(v="FeatureLayer",null!=d){const r=await(0,c.S)(e,{customParameters:a});b.sourceJSON=r,"Oriented Imagery Layer"===r.type&&(v="OrientedImageryLayer")}break;default:v=h[u]}if(y[v]&&null==d){var I;const r=await async function(e,a,r){var t,n;let l,o,u=!1;switch(a){case"FeatureServer":{const a=await(0,s.I)(e,{customParameters:r});u=!!a.layersJSON,l=a.layersJSON||a.serviceJSON;break}case"SceneServer":{const a=await async function(e,a){var r;const t=await(0,c.S)(e,{customParameters:a}),n=null===(r=t.layers)||void 0===r?void 0:r[0];if(!n)return{serviceInfo:t};try{const{serverUrl:r}=await(0,i.S)(e),n=await(0,c.S)(r,{customParameters:a}).catch((()=>null));return n&&(t.tables=n.tables),{serviceInfo:t,tableServerUrl:r}}catch{return{serviceInfo:t}}}(e,r);l=a.serviceInfo,o=a.tableServerUrl;break}default:l=await(0,c.S)(e,{customParameters:r})}const y=null===(t=l)||void 0===t?void 0:t.layers,d=null===(n=l)||void 0===n?void 0:n.tables;return{layers:(null===y||void 0===y?void 0:y.map((e=>({id:e.id}))).reverse())||[],tables:(null===d||void 0===d?void 0:d.map((e=>({serverUrl:o,id:e.id}))).reverse())||[],layerInfos:u?y:[],tableInfos:u?d:[]}}(e,u,a);if(m&&(b.sublayerInfos=r.layerInfos,b.tableInfos=r.tableInfos),1!==r.layers.length+r.tables.length)b.layers=r.layers,b.tables=r.tables,m&&(null===(I=r.layerInfos)||void 0===I?void 0:I.length)&&(b.sublayerConstructorProvider=await async function(e){const a=[],r=[];if(e.forEach((e=>{const{type:t}=e;"Oriented Imagery Layer"===t?(a.push(t),r.push(w("OrientedImageryLayer"))):(a.push(t),r.push(w("FeatureLayer")))})),!r.length)return;const t=await Promise.all(r),n=new Map;return a.forEach(((e,a)=>{n.set(e,t[a])})),e=>n.get(e.type)}(r.layerInfos));else if(m||p){var g,P,O,U,T,C;const e=null!==(g=null===(P=r.layerInfos)||void 0===P?void 0:P[0])&&void 0!==g?g:null===(O=r.tableInfos)||void 0===O?void 0:O[0];b.layerId=null!==(U=null===(T=r.layers[0])||void 0===T?void 0:T.id)&&void 0!==U?U:null===(C=r.tables[0])||void 0===C?void 0:C.id,b.sourceJSON=e,m&&"Oriented Imagery Layer"===(null===e||void 0===e?void 0:e.type)&&(v="OrientedImageryLayer")}}return b.Constructor=await w(v),b}(e.url,u),h={...e.properties,url:e.url};if(d.layers.length+d.tables.length===0)return null!=d.layerId&&(h.layerId=d.layerId),null!=d.sourceJSON&&(h.sourceJSON=d.sourceJSON),new d.Constructor(h);const m=new(0,(await r.e(7816).then(r.bind(r,7816))).default)({title:d.parsedUrl.title});return await async function(e,a,r){function t(e,a,t,n){const l={...r,layerId:a,sublayerTitleMode:"service-name"};return null!=e&&(l.url=e),null!=t&&(l.sourceJSON=t),n(l)}const n=a.sublayerConstructorProvider;for(const{id:i,serverUrl:s}of a.layers){var l;const r=v(a.sublayerInfos,i),o=null!==(l=r&&(null===n||void 0===n?void 0:n(r)))&&void 0!==l?l:a.Constructor,u=t(s,i,r,(e=>new o(e)));e.add(u)}if(a.tables.length){const r=await w("FeatureLayer");a.tables.forEach((n=>{let{id:l,serverUrl:i}=n;const s=t(i,l,v(a.tableInfos,l),(e=>new r(e)));e.tables.add(s)}))}}(m,d,h),m}function v(e,a){return e?e.find((e=>e.id===a)):null}function f(e){return null!=e&&e.hasOwnProperty("store")&&e.hasOwnProperty("id")&&"number"==typeof e.id}async function w(e){return(0,u.q[e])()}},9200:(e,a,r)=>{r.d(a,{S:()=>c});var t=r(29096),n=r(17616),l=r(80808),i=r(36844),s=r(37084),o=r(42700),u=r(39576);async function c(e,a){var r,c;const v=(0,s.K0)(e);if(!v)throw new l.c("invalid-url","Invalid scene service url");const f={...a,sceneServerUrl:v.url.path,layerId:null!==(r=v.sublayer)&&void 0!==r?r:void 0};if(null!==(c=f.sceneLayerItem)&&void 0!==c||(f.sceneLayerItem=await async function(e){const a=(await y(e)).serviceItemId;if(!a)return null;const r=new u.default({id:a,apiKey:e.apiKey}),l=await async function(e){const a=null===t.id||void 0===t.id?void 0:t.id.findServerInfo(e.sceneServerUrl);if(null!==a&&void 0!==a&&a.owningSystemUrl)return a.owningSystemUrl;const r=e.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const a=(await(0,n.c)(r,{query:{f:"json"},responseType:"json",signal:e.signal})).data.owningSystemUrl;if(a)return a}catch(w){(0,i.CE)(w)}return null}(e);null!=l&&(r.portal=new o.c({url:l}));try{return r.load({signal:e.signal})}catch(h){return(0,i.CE)(h),null}}(f)),null==f.sceneLayerItem)return d(f.sceneServerUrl.replace("/SceneServer","/FeatureServer"),f);const w=await async function(e){let{sceneLayerItem:a,signal:r}=e;if(!a)return null;try{const e=(await a.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:r})).find((e=>"Feature Service"===e.type))||null;if(!e)return null;const t=new u.default({portal:e.portal,id:e.id});return await t.load(),t}catch(t){return(0,i.CE)(t),null}}(f);if(null===w||void 0===w||!w.url)throw new l.c("related-service-not-found","Could not find feature service through portal item relationship");const h=await d(w.url,f);return h.portalItem=w,h}async function y(e){if(e.rootDocument)return e.rootDocument;const a={query:{f:"json",token:e.apiKey},responseType:"json",signal:e.signal};try{const r=await(0,n.c)(e.sceneServerUrl,a);e.rootDocument=r.data}catch{e.rootDocument={}}return e.rootDocument}async function d(e,a){const r=(0,s.K0)(e);if(!r)throw new l.c("invalid-feature-service-url","Invalid feature service url");const t=r.url.path,i=a.layerId;if(null==i)return{serverUrl:t};const o=y(a),u=e=>{const r={query:{f:"json"},responseType:"json",authMode:e,signal:a.signal};return(0,n.c)(t,r)},c=u("anonymous").catch((()=>u("no-prompt"))),[d,v]=await Promise.all([c,o]),f=null===v||void 0===v?void 0:v.layers,w=d.data&&d.data.layers;if(!Array.isArray(w))throw new Error("expected layers array");if(Array.isArray(f)){for(let n=0;n<Math.min(f.length,w.length);n++)if(f[n].id===i)return{serverUrl:t,layerId:w[n].id}}else if(null!=i&&i<w.length)return{serverUrl:t,layerId:w[i].id};throw new Error("could not find matching associated sublayer")}},69400:(e,a,r)=>{r.d(a,{I:()=>n});var t=r(37432);async function n(e,a){var r;const n=await(0,t.S)(e,a);c(n),s(n);const l={serviceJSON:n};if((null!==(r=n.currentVersion)&&void 0!==r?r:0)<10.5)return l;const i=await(0,t.S)(e+"/layers",a);return c(i),s(i),l.layersJSON={layers:i.layers,tables:i.tables},l}function l(e){return"Feature Layer"===e.type||"Oriented Imagery Layer"===e.type}function i(e){return"Table"===e.type}function s(e){var a,r;e.layers=null===(a=e.layers)||void 0===a?void 0:a.filter(l),e.tables=null===(r=e.tables)||void 0===r?void 0:r.filter(i)}function o(e){e.type||(e.type="Feature Layer")}function u(e){e.type||(e.type="Table")}function c(e){var a,r;null!==(a=e.layers)&&void 0!==a&&a.forEach(o),null===(r=e.tables)||void 0===r||r.forEach(u)}},52416:(e,a,r)=>{r.d(a,{q:()=>t});const t={BingMapsLayer:async()=>(await r.e(7912).then(r.bind(r,97912))).default,BuildingSceneLayer:async()=>(await Promise.all([r.e(480),r.e(1324),r.e(6264),r.e(8168),r.e(8544)]).then(r.bind(r,28544))).default,CSVLayer:async()=>(await r.e(7416).then(r.bind(r,45036))).default,DimensionLayer:async()=>(await r.e(5480).then(r.bind(r,35480))).default,ElevationLayer:async()=>(await r.e(552).then(r.bind(r,10552))).default,FeatureLayer:async()=>(await Promise.resolve().then(r.bind(r,47520))).default,GeoJSONLayer:async()=>(await r.e(8048).then(r.bind(r,5668))).default,GeoRSSLayer:async()=>(await r.e(2536).then(r.bind(r,52536))).default,GroupLayer:async()=>(await r.e(7816).then(r.bind(r,7816))).default,ImageryLayer:async()=>(await Promise.all([r.e(9064),r.e(3816),r.e(800),r.e(204),r.e(9256),r.e(9920),r.e(6888)]).then(r.bind(r,46888))).default,ImageryTileLayer:async()=>(await Promise.all([r.e(800),r.e(9884),r.e(204),r.e(9256),r.e(8868),r.e(9920),r.e(7108)]).then(r.bind(r,27108))).default,IntegratedMeshLayer:async()=>(await Promise.all([r.e(480),r.e(688)]).then(r.bind(r,90688))).default,KMLLayer:async()=>(await r.e(1708).then(r.bind(r,91708))).default,LineOfSightLayer:async()=>(await r.e(2904).then(r.bind(r,62904))).default,LinkChartLayer:async()=>(await Promise.all([r.e(9064),r.e(9244),r.e(7448),r.e(780),r.e(6210),r.e(2471),r.e(732)]).then(r.bind(r,60732))).default,MapImageLayer:async()=>(await Promise.all([r.e(9064),r.e(3816),r.e(9260),r.e(3120),r.e(5408)]).then(r.bind(r,55408))).default,MapNotesLayer:async()=>(await r.e(5872).then(r.bind(r,45872))).default,MediaLayer:async()=>(await r.e(7232).then(r.bind(r,47232))).default,OGCFeatureLayer:async()=>(await Promise.all([r.e(9064),r.e(3552),r.e(3463)]).then(r.bind(r,38568))).default,OpenStreetMapLayer:async()=>(await r.e(6632).then(r.bind(r,56632))).default,OrientedImageryLayer:async()=>(await r.e(4216).then(r.bind(r,14216))).default,PointCloudLayer:async()=>(await Promise.all([r.e(480),r.e(7712)]).then(r.bind(r,97712))).default,RouteLayer:async()=>(await Promise.all([r.e(5100),r.e(5828)]).then(r.bind(r,5828))).default,SceneLayer:async()=>(await Promise.all([r.e(480),r.e(1324),r.e(6264),r.e(8168),r.e(7516)]).then(r.bind(r,37516))).default,StreamLayer:async()=>(await r.e(8312).then(r.bind(r,48312))).default,SubtypeGroupLayer:async()=>(await r.e(8928).then(r.bind(r,8928))).default,TileLayer:async()=>(await Promise.all([r.e(9064),r.e(3816),r.e(9260),r.e(3120),r.e(4192)]).then(r.bind(r,74192))).default,UnknownLayer:async()=>(await r.e(856).then(r.bind(r,30856))).default,UnsupportedLayer:async()=>(await r.e(1952).then(r.bind(r,21952))).default,VectorTileLayer:async()=>(await Promise.all([r.e(7524),r.e(2120),r.e(1808)]).then(r.bind(r,14616))).default,VoxelLayer:async()=>(await Promise.all([r.e(480),r.e(1784)]).then(r.bind(r,61784))).default,WFSLayer:async()=>(await Promise.all([r.e(1860),r.e(5452)]).then(r.bind(r,81536))).default,WMSLayer:async()=>(await r.e(6800).then(r.bind(r,56800))).default,WMTSLayer:async()=>(await r.e(9748).then(r.bind(r,39748))).default,WebTileLayer:async()=>(await r.e(6341).then(r.bind(r,46341))).default}},37432:(e,a,r)=>{r.d(a,{S:()=>n});var t=r(17616);async function n(e,a){const{data:r}=await(0,t.c)(e,{responseType:"json",query:{f:"json",...null===a||void 0===a?void 0:a.customParameters,token:null===a||void 0===a?void 0:a.apiKey}});return r}}}]);
//# sourceMappingURL=4832.fcb089c3.chunk.js.map